doctype html
html(lang='en')
	head
		meta(charset='utf-8')
		meta(http-equiv='X-UA-Compatible', content='IE=edge')
		meta(name='viewport', content='width=device-width, initial-scale=1')
		title Cloud Vision API
		link(href='//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css', rel='stylesheet')
		link(rel='stylesheet', type='text/css', href='style.css')

	body
		mixin thumbnail(data)
			//- script.
			//- 	var response =!{JSON.stringify(data.json_data)};

			.col-sm-3
				img.img-ocr.img-responsive(src=data.image_url, alt="", data-json=data.json_data)

		mixin modals(image, json)
			#myModal.modal.fade(role='dialog')
				.modal-dialog
					//- Modal content
					.modal-content
						.modal-header
							button.close(type='button', data-dismiss='modal') ×
							h4.modal-title Modal Header
						.modal-body
							p Some text in the modal.
						.modal-footer
							button.btn.btn-default(type='button', data-dismiss='modal') Close

		nav.navbar.navbar-inverse.navbar-fixed-top(role='navigation')
			.container
				.navbar-header
					a.navbar-brand(href='/') Cloud Vision
		.container
			.content
				h3 Google Cloud Vision
				form(action='/', method='post', enctype='multipart/form-data')
					.row
						.form-group
							label(for='image') Image
							input#image.form-control(type='file', name='image')

					.form-group
						label(for='imageType') Type of image feature:
						select.form-control(name='imageType')
							each option in defaultContext.featureTypes
								option= option

					.form-group
						label(for='maxResults') Max results:
						select.form-control(name='maxResults')
							option 1
							option 2
							option 3
							option 4
							option 5
							option 6
							option 7
							option 8
							option 9
							option 10
					.form-group
						button.btn.btn-success(type='submit') Submit

				if data
					.panel.panel-default
						.panel-heading
							h3.panel-title Output

						.container-fluid
							.row
								each items in data
									+thumbnail(items)
									//- .col-sm-6
									//- 	#panel-body.panel-body
									//- 		pre.prettyprint!=output.prettyprint
									//- .col-sm-6
									//- 	.canvas-wrapper
									//- 		canvas#panel-canvas.canvas
									//- 	script.
									//- 		var response =!{JSON.stringify(output.response)};  
									//- 		initCanvas("#{output.imageUrl}", response);

		#myModal.modal.fade(role='dialog')
			.modal-dialog.modal-lg
				.modal-content
					.modal-header
						button.close(type='button', data-dismiss='modal') ×
						h4.modal-title Modal Header
					.modal-body
						.canvas-wrapper
							canvas#panel-canvas.canvas(width="100", height="100")
					.modal-footer
						button.btn.btn-default(type='button', data-dismiss='modal') Close

		script(src='http://code.jquery.com/jquery-3.2.1.min.js')
		script(src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js')
		script(src='script.js')  